!function(context,definition){"use strict";"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof define&&define.amd?define(function(){return window.SimpleSlider=definition()}):context.SimpleSlider=definition()}(this,function(){"use strict";function getdef(val,def){return void 0===val||null===val||""===val?def:val}function getUnit(args,transitionProperty){for(var item,count=args.length,unit="";--count>=0;)item=args[count],"string"==typeof item&&(unit=item.replace(parseInt(item,10)+"",""));return"opacity"!==transitionProperty&&""===unit&&(unit="px"),unit}function testChildrenNum(value){if(0>=value){try{console.warn("A SimpleSlider main container elementshould have at least one child.")}catch(e){}return!0}return!1}function anim(target,prop,unit,transitionDuration,startTime,elapsedTime,fromValue,toValue,easeFunc){function loop(){window.requestAnimationFrame(function(time){0===startTime&&(startTime=time),anim(target,prop,unit,transitionDuration,startTime,time,fromValue,toValue,easeFunc)})}var newValue;return 0===startTime?loop():(newValue=easeFunc(elapsedTime-startTime,fromValue,toValue-fromValue,transitionDuration),void(transitionDuration>=elapsedTime-startTime?(target[prop]=newValue+unit,loop()):target[prop]=toValue+unit))}function startSlides(container,unit,startValue,visibleValue,transitionProperty){for(var imgs=[],i=container.children.length;--i>=0;)imgs[i]=container.children[i],imgs[i].style.position="absolute",imgs[i].style.top="0"+unit,imgs[i].style.left="0"+unit,imgs[i].style[transitionProperty]=startValue+unit,imgs[i].style.zIndex=0;return imgs[0].style[transitionProperty]=visibleValue+unit,imgs[0].style.zIndex=1,imgs}function manageRemovingSlideOrder(oldSlide,newSlide){return newSlide.style.zIndex=3,oldSlide&&(oldSlide.style.zIndex=1),newSlide}function manageInsertingSlideOrder(oldSlide,newSlide){return newSlide.style.zIndex=4,oldSlide&&(oldSlide.style.zIndex=2),newSlide}function parseStringToBoolean(value){return"false"===value?!1:value}function updateVisibility(slider){document[hidden]?slider.pauseAutoPlay():slider.resumeAutoPlay()}Date.now||(Date.now=function(){return(new Date).getTime()});for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(callback){var now=Date.now(),nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime)},nextTime-now)},window.cancelAnimationFrame=clearTimeout}var hidden,visibilityChange,hasVisibilityHandler;"undefined"!=typeof document.hidden?(hidden="hidden",visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(hidden="mozHidden",visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange");var SimpleSlider=function(containerElem,options){this.containerElem=containerElem,this.interval=null,options||(options={});var width=parseInt(this.containerElem.style.width||this.containerElem.offsetWidth,10);this.trProp=getdef(options.transitionProperty,"left"),this.trTime=getdef(options.transitionDuration,.5),this.delay=1e3*getdef(options.transitionDelay,3),this.unit=getUnit([options.startValue,options.visibleValue,options.endValue],this.trProp),this.startVal=parseInt(getdef(options.startValue,-width+this.unit),10),this.visVal=parseInt(getdef(options.visibleValue,"0"+this.unit),10),this.endVal=parseInt(getdef(options.endValue,width+this.unit),10),this.autoPlay=getdef(parseStringToBoolean(options.autoPlay),!0),this.ease=getdef(options.ease,SimpleSlider.defaultEase),this.onChange=getdef(options.onChange,null),this.init()};return SimpleSlider.defaultEase=function(time,begin,change,duration){return(time/=duration/2)<1?change/2*time*time*time+begin:change/2*((time-=2)*time*time+2)+begin},SimpleSlider.easeNone=function(time,begin,change,duration){return change*time/duration+begin},SimpleSlider.prototype.init=function(){this.reset(),this.configSlideshow()},SimpleSlider.prototype.reset=function(){testChildrenNum(this.containerElem.children.length)||(this.containerElem.style.position="relative",this.containerElem.style.overflow="hidden",this.containerElem.style.display="block",this.imgs=startSlides(this.containerElem,this.unit,this.startVal,this.visVal,this.trProp),this.actualIndex=0,this.inserted=null,this.removed=null,this.remainingTime=this.delay)},SimpleSlider.prototype.configSlideshow=function(){return this.imgs?void this.startInterval():!1},SimpleSlider.prototype.startInterval=function(){var self=this;this.isAutoPlayable()&&(this.interval&&window.clearTimeout(this.interval),function setInterval(){self.intervalStartTime=Date.now(),self.interval=window.setTimeout(function(){self.intervalStartTime=Date.now(),self.remainingTime=self.delay,self.change(self.nextIndex()),setInterval()},self.remainingTime)}(),function(){hasVisibilityHandler||"undefined"==typeof document.addEventListener||(document.addEventListener(visibilityChange,function(){updateVisibility(self)},!1),hasVisibilityHandler=!0)}())},SimpleSlider.prototype.isAutoPlayable=function(){return this.autoPlay&&this.imgs.length>1},SimpleSlider.prototype.pauseAutoPlay=function(){this.isAutoPlayable()&&(this.remainingTime=this.delay-(Date.now()-this.intervalStartTime),window.clearTimeout(this.interval),this.interval=null)},SimpleSlider.prototype.resumeAutoPlay=function(){this.startInterval()},SimpleSlider.prototype.startAnim=function(target,fromValue,toValue){anim(target.style,this.trProp,this.unit,1e3*this.trTime,0,0,fromValue,toValue,this.ease)},SimpleSlider.prototype.remove=function(index){this.removed=manageRemovingSlideOrder(this.removed,this.imgs[index]),this.startAnim(this.imgs[index],this.visVal,this.endVal)},SimpleSlider.prototype.insert=function(index){this.inserted=manageInsertingSlideOrder(this.inserted,this.imgs[index]),this.startAnim(this.imgs[index],this.startVal,this.visVal)},SimpleSlider.prototype.change=function(newIndex){var prevIndex=this.actualIndex;this.remove(this.actualIndex),this.insert(newIndex),this.actualIndex=newIndex,(this.onChange||"[object Function]"==Object.prototype.toString.call(this.onChange))&&this.onChange(prevIndex,this.actualIndex)},SimpleSlider.prototype.next=function(){this.change(this.nextIndex()),this.startInterval()},SimpleSlider.prototype.prev=function(){this.change(this.prevIndex()),this.startInterval()},SimpleSlider.prototype.nextIndex=function(){var newIndex=this.actualIndex+1;return newIndex>=this.imgs.length&&(newIndex=0),newIndex},SimpleSlider.prototype.prevIndex=function(){var newIndex=this.actualIndex-1;return 0>newIndex&&(newIndex=this.imgs.length-1),newIndex},SimpleSlider.prototype.dispose=function(){if(window.clearTimeout(this.interval),this.imgs){for(var i=this.imgs.length;--i>=0;)this.imgs.pop();this.imgs=null}this.containerElem=null,this.interval=null,this.trProp=null,this.trTime=null,this.delay=null,this.startVal=null,this.endVal=null,this.autoPlay=null,this.actualIndex=null,this.inserted=null,this.removed=null,this.remainingTime=null},SimpleSlider});